name: Build and Test (Feature)

on:
  pull_request:
    branches: [develop]
    types: [opened, reopened]

jobs:
  build-feature:
    runs-on: ubuntu-latest
    steps:
        - uses: actions/checkout@v3
          with: 
            ref: ${{github.event.pull_request.head.sha}}
        - name: Pull and Checkout code
          run: echo "Pulling and checking out from the git repository"

        - name: Set up JDK
          uses: actions/setup-java@v3
          with:
            distribution: 'temurin' # or 'zulu'
            java-version: '17'
            
        - name: Cache maven dependencies
          uses: actions/cache@v2
          with:
            path: ~/.m2/repository
            key: ${{ runner.os }}-maven-${{ hashFiles('**/pom.xml') }}
            restore-keys: |
              ${{ runner.os }}-maven-

        - name: Build with Maven
          run: mvn clean install

        - name: Run Unit Tests
          run: mvn test
